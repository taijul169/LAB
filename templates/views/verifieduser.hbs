{{>header}}

        <!-- ============================================================== -->
        <!-- End Topbar header -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        {{>nav}}
        <!-- ============================================================== -->
        <!-- End Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page wrapper  -->
        <!-- ============================================================== -->
        <div class="page-wrapper">
                {{!-- ID Card --}}
            <!-- Button trigger modal -->
                <!-- Modal -->
               <div class="modal fade"  id="exampleModal" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" >
                  <div class="modal-content custom-content-card text-center ">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">User ID Card</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">X</button>
                    </div>
                  
                      <div class="custom-card shadow"  id="idcardWrap">
                        {{!-- card-front --}}
                        <div class="card-front">
                              {{!-- front-header --}}
                            <div class="card-front-header d-flex justify-content-between">
                              <div class="logo-card">
                                <img style="width: 35px;" src="/images/logo.png" alt="logo">
                              </div>
                              <div class="qrcode-card">
                                <input type="hidden" id="qr_code_value_id" value={{userData.[0].id}}>
                                <input type="hidden" id="qr_code_value_name" value={{userData.[0].name}}>
                                <input type="hidden" id="qr_code_value_email" value={{userData.[0].email}}>
                                <input type="hidden" id="qr_code_value_phone" value={{userData.[0].phone}}>
                                <input type="hidden" id="qr_code_value_division" value={{userData.[0].division}}>
                                {{!-- qr_code display --}}
                                <div id="output_qr"></div>
                                
                                 {{!-- <img style="width: 50px;" src="/images/qr.png" alt="qr"> --}}
                              </div>
                            </div>
                          
                            {{!-- front-image-card --}}
                            <div class="front-image-card w-50">
                              <div class="img-shape">
                                <img src="data:image/png;base64,{{userData.[0].userphoto}}" style="width: 120px;" alt="proimg">
                              </div>
                            </div>
                            <div class="name_title">
                              <h4>{{userData.[0].firstname}}  {{userData.[0].lastname}}</h4>
                              <h5>{{designation userData.[0].committee_designation}}</h5>
                              <span class="d-block">Central committee (LAB)</span>
                              <small>Valid Till 24-07-2023</small>
                              
                            </div>
                            <div class="info-card text-left mt-2">
                            <h4><strong>ID: <span>00000{{userData.[0].id}}</span></strong></h4>
                            <small>Blood Group: <span>{{userData.[0].bloodgroup}}</span></small>
                            <p>Mob: <span>+88{{userData.[0].phone}}</span></p>
                            </div>
                            <div class="id-card-footer">
                              <div class="auth d-flex justify-content-between">
                                <div class="auth-president">
                                  <span>President</span>
                                  <i class="d-block">Signature</i>
                                </div>
                                <h6>Authorised By:</h6>
                                <div class="auth-secretary">
                                  <span>Secretary</span>
                                  <i class="d-block">Signature</i>
                                </div>
                              </div>
                            </div>
                        </div>
                         <div class="html2pdf__page-break"></div>
                        {{!-- card-Back --}}
                        <div class="card-front back mt-1  text-center position-relative" > 
                         <div class="logo-card-back mb-1 ">
                              <img style="width: 70px;" src="/images/logo.png" alt="logo">
                         </div>
                         <div class="heading-back text-uppercase mt-3">
                            <h4 style="font-size: 8px; color:black; line-height:0%" class="font-weight-bold">Law association of bangladesh</h4>
                            <span style="font-size: 6px; letter-spacing:1px;color:rgb(31, 31, 31);font-wight:500px; margin-top:-2px;display:block">Fight for right i fight for justice</span>
                          </div>
                          <div class="contact-info-card">
                            <ul>
                              <li><i class="fa fa-mobile mr-1" aria-hidden="true"></i> +88{{userData.[0].phone}}</li>
                              <li><i class="fa fa-map-marker mr-1" aria-hidden="true"></i>{{userData.[0].upazila}},{{userData.[0].district}},Bangladesh</li>
                              <li><i class="fa fa-envelope mr-1" aria-hidden="true"></i> {{userData.[0].email}}</li>
                            </ul>
                      
                          
                          </div>
                          <div class="id-card-footer back">
                            www.labbd.org
                            </div>
                        </div>
                      
                  </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" onclick="pdfGenarator()" class="btn btn-primary">Download</button>
                    </div>
                 </div>
                </div>
               </div>
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <div class="page-breadcrumb bg-white">
                <div class="row align-items-center">
                    <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
                        <h4 class="page-title text-uppercase font-medium font-14" id="page_title"></h4>
                    </div>
                    <div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
                        <div class="d-md-flex">
                            <ol class="breadcrumb ml-auto">
                                <li><a href="#">Dashboard</a></li>
                            </ol>
                            <a href="/index.html" target="_blank"
                                class="btn btn-danger  d-none d-md-block pull-right m-l-20 hidden-xs hidden-sm waves-effect waves-light">View Your Site</a>
                        </div>
                    </div>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">
                <!-- ============================================================== -->
                <!-- Start Page Content -->
                <!-- ============================================================== -->
             <section class="content">
                    <div class="container-fluid">
                        <div class="row">
                            {{!-- ssc --}}
                            <div class="col-sm-12 col-md-12 col-lg-12">
                                 {{#if message}}
                                    <div class="alert {{message.type}}" role="alert">
                                        {{message.message}}
                                    </div>
                                    {{/if}}
                                   
                                <div class="card card-warning card-outline">
                                    <div class="card-header">
                                        All Verified User
                                    </div>
                                    <div class="custom-card-filter py-3 bg-cover">
                                    <div class="row">
                                      <div class="col-md-12 p-0">
                                         <form method="POST" id="filter_form">
                                          <div class="card">
                                              <div class="card-header">
                                                  <a type="button" class="btn btn-tool btn-link" data-bs-toggle="collapse" href="#filterCollapse" role="button" aria-expanded="false" aria-controls="filterCollapse">
                                                      <h3 class="card-title">
                                                          Filter <i class="fas fa-arrow-circle-down"></i>
                                                      </h3>
                                                  </a>
                                                
                                              </div>
                                              <div class="card-body collapse" id="filterCollapse">
                                                  <div class="row" autocomplete="off">
                                                      <div class="form-group col-md-4" >
                                                          <label class="col-sm-12 col-form-label" id="reg_no">District</label>
                                                          <div class="col-sm-12">
                                                              <select class="" name="district" id="district" tabindex="-1" aria-hidden="true">
                                                                <option value="">Select Option</option>
                                                                {{#each divisionInfo}}
                                                                    <option value={{this.district}}>{{this.district}}</option>
                                                                {{/each }}
                                                                
                                                              </select>
                                                      
                                                     </div>
                                                      </div>
                                                      {{!-- <div class="form-group col-md-3">
                                                          <label class="col-sm-12 col-form-label" for="designation">Upazila</label>
                                                          <div class="col-sm-12">
                                                              <select class="" name="upazila" id="degree" tabindex="-1" aria-hidden="true">
                                                                <option value="">Select Option</option>
                                                                <option value="Muladi">Muladi</option>
                                                                <option value="y">y</option>
                                                                <option value="Khulna">Khulna</option>
                                                                <option value="Sylhet">Sylhet</option>
                                                                <option value="Rajshahi">Rajshahi</option>
                                                                <option value="Rangpur">Rangpur</option>
                                                                <option value="Mymonshing">Mymonshing</option>
                                                              </select>
                                                          </div>
                                                      </div> --}}
                                                   
                                                    
                                                      <div class="form-group col-md-4">
                                                          <label for="phone" class="col-sm-12 col-form-label">Mobile No.</label>
                                                          <div class="col-sm-12">
                                                              <input type="text" id="mobile" autocomplete="off" class="form-control" name="mobile" value="" placeholder="Mobile No">
                                                          </div>
                                                      </div>

                                                      {{!-- <div class="form-group col-md-3">
                                                          <label for="email" class="col-sm-12 col-form-label">Email</label>
                                                          <div class="col-sm-12">
                                                              <input type="text" id="email" autocomplete="off" class="form-control" name="email" value="" placeholder="Email">
                                                          </div>
                                                      </div> --}}
                                                      {{!-- <div class="form-group col-md-3">
                                                          <label class="col-sm-12 col-form-label" for="year">Blood Group</label>
                                                          <div class="col-sm-12">
                                                              <select name="bloodgroup"  class="form-control"  tabindex="-1" aria-hidden="true">
                                                                  <option value="" >Select...</option>
                                                                  <option value="A+">
                                                                      A+
                                                                  </option>
                                                                  <option value="A-">
                                                                      A-
                                                                  </option>
                                                                  <option value="B+">
                                                                      B+
                                                                  </option>
                                                                  <option value="B-">
                                                                      B-
                                                                  </option>
                                                                  <option value="O+">
                                                                      O+
                                                                  </option>
                                                                  <option value="O-">
                                                                      O-
                                                                  </option>
                                                                  <option value="AB+">
                                                                      AB+
                                                                  </option>
                                                                  <option value="AB-">
                                                                      AB-
                                                                  </option>
                                                              </select>
                                                          </div>
                                                      </div> --}}
                                                      <div class="form-group col-md-4">
                                                          <label class="col-sm-12 col-form-label">Registration No.</label>
                                                          <div class="col-sm-12">
                                                              <input type="text" for="reg_no" autocomplete="off" id="reg_no" class="form-control" name="id" value="" placeholder="Registration No">
                                                          </div>
                                                      </div>

                                                      <fieldset class="form-group col-md-12">
                                                          <div class="col-sm-3">
                                                              <button id="search" onsubmit="validatefilter()" type="submit" class="btn btn-primary btn-rounded">Search</button>
                                                              
                                                          </div>
                                                      </fieldset>
                                                  </div>

                                              </div>
                                              <!-- /.card-body -->
                                              <!-- /.card-footer-->
                                          </div> 
                                         </form>   
                                      </div>
                                    </div>
                                    </div>
                                    {{!-- hidden-data --}}
                                    <input type="hidden" id="allData" value="{{StringData}}">
                                    <input class="form-control w-25 my-2 ml-2"  type="text" id="quick_search" placeholder="Enter the keyword to quick search">
                                    <div class="card-body">  
                                     <div class="table-responsive">       
                                       <div>
                                         <table class="table table-hover table-striped dt-responsive nowrap" id="active_blog" width="100%">
                                            <thead>
                                                <tr>
                                                    <th>#SL</th>
                                                    <th>User</th>
                                                    <th>Name</th>
                                                    <th>Address</th>
                                                    <th>Profession</th>
                                                    <th>From</th>
                                                    <th>Action</th>
                                                </tr>
                                              </thead>
                                              <tbody id="data-container">

                                              </tbody>
                                         </table>
                                       </div>        
                                        </div>
                                     <div class="custom-pagination-wrap w-100 d-flex justify-content-center" id="pagination-container">
                            
                                     </div>
                                </div>
                            </div>

                            <script>

                                const payment_title_el =  document.getElementById('payment_title'); 
                                const id_el =  document.getElementById('id'); 
                                const payment_for_el =  document.getElementById('payment_for'); 
                                const payment_method_el =  document.getElementById('payment_method'); 
                                const transactionid_el =  document.getElementById('transactionid'); 
                                const category_el =  document.getElementById('category'); 
                                const senderno_el =  document.getElementById('senderno');
                                const amount_el =  document.getElementById('amount');
                                const Payment_date =  document.getElementById('payment_date');

                                const displayDataIntoModal =(id,payment_title,payment_for,amount,paymentdate,transactionid,category,senderno,paymentmethod)=>{
                                    id_el.value = id;
                                    payment_title_el.value = payment_title;
                                    payment_for_el.value = payment_for;
                                    payment_method_el.value = paymentmethod;
                                    transactionid_el.value = transactionid;
                                    category_el.value = category;
                                    senderno_el.value = senderno;
                                    amount_el.value = amount;
                                    Payment_date.value = paymentdate;
                                }
                                //onsubmit

                               //pagination
                              const allData =   document.getElementById('allData').value;
                              const userData = JSON.parse(allData) 
                              console.log("pagination Data",userData);


                               $('#pagination-container').pagination({
                                      dataSource: userData,
                                      pageSize: 10,
                                      callback: function(userData, pagination) {
                                          // template method of yourself
                                          var html = template(userData);
                                          $('#data-container').html(html);
                                      }
                               
                                
                                });

                                function template(data){
                                  console.log("inside function:",data)
                                   var html = '';
                                      $.each(data, function(index, item){
                                          html += `<tr>
                                                    <td>${index+1}</td>
                                                    <td> <img style="width: 30px; height:30px; border-radius:50%" src="data:image/png;base64,${item.userphoto}" alt=""></td>
                                                    <td>${item.firstname}</td>
                                                    <td>${item.upazila},${item.district}</td>
                                                    
                                                    <td>${item.profession}</td>
                                                    <td>${item.createdate}</td>
                                                    <td>
                                                        <div class="btn-group">
                                                            <a  href="/users/singleuserview/${item.id}" role="button" class="btn btn-readmore btn-info btn-sm">Details</a>
                                                            <a href="#" role="button" class="btn btn-readmore btn-danger ml-1 btn-sm"><i class="fa fa-trash"></i></a>
                                                        </div>
                                                    </td>
                                                </tr>`;
                                      });
                                      
                                      return html;

                                }

                                //select 2 activation --
                                $('.degree').select2();
                                $('.institution').select2();
                                $('.group').select2();
                                $('.graduationyear').select2();
                                $('.bloodgroup').select2();


                                
                            </script>

                            {{!-- filter-table data --}}
                            <script>
                                $(document).ready(function(){
 
                                // quick search
                                $("#quick_search").on("keyup", function() {
                                    var value = $(this).val().toLowerCase();
                                    $("#data-container tr").filter(function() {
                                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                                    });
                                });
                                  //page title
                                 let str = window.location.pathname;
                                  const myArr = str.split("/");
                                  console.log(myArr) 
                                 $('#page_title').text(myArr[2]) 
                                 
                                });

                                //set form-action
                                $("#filter_form").submit(function(e){
                                    var district =  $("#district");
                                    var mobile =  $("#mobile");
                                    var reg_no =  $("#reg_no");
                                  if((district.val() == '') && (mobile.val() == '') && (reg_no.val() =='')){
                                      window.alert("Minimum one field required to filter!!")
                                      return false;
                                  }
                                  else{
                                  let str = window.location.pathname;
                                  const myArr = str.split("/");
                                  console.log(myArr)
                                  $("#filter_form").attr("action", `/admin/filterdata?page=${myArr[2]}`);
                                  }
                                 
                                });

                                
                                                             
                               
                            </script>
                            
                       
                        </div>
                    </div>    
            </section>

           </div>
            </section>
            
           
                <!-- ============================================================== -->
                <!-- End PAge Content -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- Right sidebar -->
                <!-- ============================================================== -->
                <!-- .right-sidebar -->
                <!-- ============================================================== -->
                <!-- End Right sidebar -->
                <!-- ============================================================== -->
            </div>
            <!-- ============================================================== -->
            <!-- End Container fluid  -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- footer -->
            <!-- ============================================================== -->
           {{>footer}}