{{>header}}

        <!-- ============================================================== -->
        <!-- End Topbar header -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        {{>nav}}
        <!-- ============================================================== -->
        <!-- End Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page wrapper  -->
        <!-- ============================================================== -->
        <div class="page-wrapper">

              <input type="hidden" value="{{data}}" id="hiddendata">
            {{!-- <input type="hidden" value="{{datadistrict}}" id="datadistrict"> --}}
            <input type="hidden" value="{{dataDivison}}" id="datadistrict">
               {{!-- ID Card --}}
            <!-- Button trigger modal -->
                <!-- Modal -->
               <div class="modal fade"  id="exampleModal" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" >
                  <div class="modal-content custom-content-card text-center ">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">User ID Card</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">X</button>
                    </div>
                  
                      <div class="custom-card shadow"  id="idcardWrap">
                        {{!-- card-front --}}
                        <div class="card-front">
                              {{!-- front-header --}}
                            <div class="card-front-header d-flex justify-content-between">
                              <div class="logo-card">
                                <img style="width: 35px;" src="/images/logo.png" alt="logo">
                              </div>
                              <div class="qrcode-card">
                                <input type="hidden" id="qr_code_value_id" value={{userData.[0].id}}>
                                <input type="hidden" id="qr_code_value_name" value={{userData.[0].name}}>
                                <input type="hidden" id="qr_code_value_email" value={{userData.[0].email}}>
                                <input type="hidden" id="qr_code_value_phone" value={{userData.[0].phone}}>
                                <input type="hidden" id="qr_code_value_division" value={{userData.[0].division}}>
                                {{!-- qr_code display --}}
                                <div id="output_qr"></div>
                                
                                 {{!-- <img style="width: 50px;" src="/images/qr.png" alt="qr"> --}}
                              </div>
                            </div>
                          
                            {{!-- front-image-card --}}
                            <div class="front-image-card w-50">
                              <div class="img-shape">
                                <img src="data:image/png;base64,{{userData.[0].userphoto}}" style="width: 120px;" alt="proimg">
                              </div>
                            </div>
                            <div class="name_title">
                              <h4>{{userData.[0].firstname}}  {{userData.[0].lastname}}</h4>
                              <h5>{{designation userData.[0].committee_designation}}</h5>
                              <span class="d-block">Central committee (LAB)</span>
                              <small>Valid Till 24-07-2023</small>
                              
                            </div>
                            <div class="info-card text-left mt-2">
                            <h4><strong>ID: <span>00000{{userData.[0].id}}</span></strong></h4>
                            <small>Blood Group: <span>{{userData.[0].bloodgroup}}</span></small>
                            <p>Mob: <span>+88{{userData.[0].phone}}</span></p>
                            </div>
                            <div class="id-card-footer">
                              <div class="auth d-flex justify-content-between">
                                <div class="auth-president">
                                  <span>President</span>
                                  <i class="d-block">Signature</i>
                                </div>
                                <h6>Authorised By:</h6>
                                <div class="auth-secretary">
                                  <span>Secretary</span>
                                  <i class="d-block">Signature</i>
                                </div>
                              </div>
                            </div>
                        </div>
                         <div class="html2pdf__page-break"></div>
                        {{!-- card-Back --}}
                        <div class="card-front back mt-1  text-center position-relative" > 
                         <div class="logo-card-back mb-1 ">
                              <img style="width: 70px;" src="/images/logo.png" alt="logo">
                         </div>
                         <div class="heading-back text-uppercase mt-3">
                            <h4 style="font-size: 8px; color:black; line-height:0%" class="font-weight-bold">Law association of bangladesh</h4>
                            <span style="font-size: 6px; letter-spacing:1px;color:rgb(31, 31, 31);font-wight:500px; margin-top:-2px;display:block">Fight for right i fight for justice</span>
                          </div>
                          <div class="contact-info-card">
                            <ul>
                              <li><i class="fa fa-mobile mr-1" aria-hidden="true"></i> +88{{userData.[0].phone}}</li>
                              <li><i class="fa fa-map-marker mr-1" aria-hidden="true"></i>{{userData.[0].upazila}},{{userData.[0].district}},Bangladesh</li>
                              <li><i class="fa fa-envelope mr-1" aria-hidden="true"></i> {{userData.[0].email}}</li>
                            </ul>
                      
                          
                          </div>
                          <div class="id-card-footer back">
                            www.labbd.org
                            </div>
                        </div>
                      
                  </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" onclick="pdfGenarator()" class="btn btn-primary">Download</button>
                    </div>
                 </div>
                </div>
               </div>
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <div class="page-breadcrumb bg-white">
                <div class="row align-items-center">
                    <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
                        <h4 class="page-title text-uppercase font-medium font-14">Institutionlist</h4>
                    </div>
                    <div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
                        <div class="d-md-flex">
                            <ol class="breadcrumb ml-auto">
                                <li><a href="#">Dashboard</a></li>
                            </ol>
                            <a href="/index.html" target="_blank"
                                class="btn btn-danger  d-none d-md-block pull-right m-l-20 hidden-xs hidden-sm waves-effect waves-light">View Your Site</a>
                        </div>
                    </div>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">

                <!-- Modal for div/dis/upazila -->
                <div class="modal fade" id="divisionModal" data-bs-keyboard="false" tabindex="-1"  aria-labelledby="divisionModal" aria-hidden="true">
                    <div class="modal-dialog">
                    <form id="editdivision">
                        <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title"  ><input class="form-control text-uppercase w-100" type="text" value="Divison/District/Upazila" readonly name="degree"></h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">X</button>
                        </div>
                        <div class="modal-body">
                        
                            <div class="form-group">
                                <label for="">ID</label>
                                <input type="text" name="id" class="form-control" readonly id="id_div">
                            </div>
                            <div class="form-group">
                                <label for="">Division</label>
                                <input type="text" name="division" class="form-control " id="division">
                            </div>
                            <div class="form-group">
                                <label for="">District</label>
                                <input type="text" name="district" class="form-control " id="district">
                            </div>
                             <div class="form-group">
                                <label for="">Upazila</label>
                                <input type="text" name="upazila" class="form-control " id="upazila">
                            </div>
                        
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-primary">Update</button>
                        </div>
                        </div>
                    </form> 
                    </div>
                </div>

            {{!-- modal for edit of institution --}}
            <!-- Modal -->
            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <form  method="POST" action="/users/updateinstitution">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="staticBackdropLabel" ><input class="form-control text-uppercase w-100" type="text" id="degree" readonly name="degree"></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">X</button>
                    </div>
                    <div class="modal-body">
                      
                           <div class="form-group">
                               <label for="">ID</label>
                               <input type="text" name="id" class="form-control" readonly id="id">
                           </div>
                           <div class="form-group">
                               <label for="">Name</label>
                               <input type="text" name="name" class="form-control " id="name">
                           </div>
                            <div class="form-group">
                               <label for="validationCustom01" class="form-label">Level</label>
                                  <select name="level" id="level" required>
                                  
                                    <option value="ssc">SSC</option>
                                    <option value="hsc">HSC</option>
                                    <option value="bachelor">Bachelor</option>
                                </select>
                           </div>
                            <div class="form-group">
                               <label for="validationCustom01" class="form-label">Select Category</label>
                                  <select name="category" id="category">
                                    <option value="">Choose One</option>
                                    <option value="division">Division</option>
                                    <option value="district">District</option>
                                    <option value="upazila">upazila</option>
                                </select>
                           </div>
                            <div class="form-group box-div d-none">
                               <label for="">Division</label>
                               <select onchange="getDivisionValue()" name="division" id="division_ins">
                                    <option value="">Select division</option>
                                   {{#each divisiondata}}
                                         <option value="{{this.division}}">{{this.division}}</option>
                                   {{/each}}
                                  
                               </select>
                              
                           </div>
                            <div class="form-group box-dis d-none">
                               <label for="">District</label>
                               <select name="district" onchange="getDistrictValue()"   class="custom-select district" id="district_ins">
                                </select>
                           </div>
                            <div class="form-group box-upa d-none">
                               <label for="">Upazila</label>
                               <select name="upazila"    class="custom-select upazila" id="upazila_ins">
                              </select>
                           </div>
                            
                      
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Update</button>
                    </div>
                    </div>
                  </form> 
                </div>
                </div>

                <script>
                  
                        //dependency adding
                        const category =  $("#category");
                        const committee_category =  $("#category");

                        category.change(function(){
                            if( category.val() == 'division'){
                                $(".box-div").removeClass("d-none");
                                $(".box-div").addClass("d-block");
                                $(".box-dis").addClass("d-none");
                                $(".box-dis").removeClass("d-block");
                                $(".box-upa").addClass("d-none");
                                $(".box-upa").removeClass("d-block");
                            }
                            else if(category.val() == 'district'){
                                $(".box-div").removeClass("d-none");
                                $(".box-div").addClass("d-block");
                                $(".box-dis").addClass("d-block")
                                $(".box-dis").removeClass("d-none")
                                $(".box-upa").addClass("d-none");
                                $(".box-upa").removeClass("d-block");
                            }
                            else if(category.val() == 'upazila'){ 
                                $(".box-div").removeClass("d-none")
                                $(".box-div").addClass("d-block")
                                $(".box-dis").addClass("d-block")
                                $(".box-dis").removeClass("d-none")
                                $(".box-upa").addClass("d-block");
                                $(".box-upa").removeClass("d-none");
                            }
                            else{
                                category.val() == '';
                                $(".box-div").removeClass("d-block")
                                $(".box-dis").removeClass("d-block")
                                $(".box-upa").removeClass('d-block')
                            }
                            
                        })
                </script>
                  <script>
   
                            //-------dynamic upazila -----------------------------------
                            const hiddendata = document.getElementById("hiddendata").value;
                            const upazila = document.getElementById("upazila_ins");
                            const district = document.getElementById('district_ins');
                            const parsedata = JSON.parse(hiddendata);
                            
                            const getDistrictValue =(e)=>{
                                upazila.innerHTML = '';
                                const districtvalue =  document.getElementById('district_ins').value;
                                let test = [districtvalue]
                                let answer = parsedata.filter(item => (
                                    test.includes(item.district)
                                    )).map(item => item.upazila)
                            //--------------------------------------------------------------------------------
                        
                                    answer.forEach(arrfunction);
                                    
                                    function arrfunction(array_element) {
                                        console.log("array_element",array_element)
                                    
                                    document.getElementById("upazila_ins").innerHTML += `<option value="${array_element}">${array_element}</option>`;
                                    
                                    }
                            }

                            
                                const getDivisionValue =(e)=>{   
                                district.innerHTML = '';
                                const divisionvalue =  document.getElementById('division_ins').value;
                                let test = [divisionvalue]
                                let answer = parsedata.filter(item => (
                                    test.includes(item.division)
                                    )).map(item => item.district)

                            let answerData = answer.filter((item,i,ar)=>ar.indexOf(item) === i);
                            //--------------------------------------------------------------------------------
                        
                                    answerData.forEach(arrfunction);
                                    
                                    function arrfunction(array_element) {
                                        console.log("array_element",array_element)
                                    document.getElementById("district_ins").innerHTML += `<option value="${array_element}">${array_element}</option>`;
                                    
                                    }
                            }
                        

                </script>
                <!-- ============================================================== -->
                <!-- Start Page Content -->
                <!-- ============================================================== -->
             <section class="content">
                    <div class="container-fluid">
                        <div class="row">
                            {{!-- ssc --}}
                            <div class="col-sm-12">
                                 {{#if message}}
                                    <div class="alert {{message.type}}" role="alert">
                                        {{message.message}}
                                    </div>
                                    {{/if}}
                                <div class="card card-warning card-outline">
                                    <div class="card-header">
                                        SSC
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-hover table-striped dt-responsive nowrap" id="active_blog" width="100%">
                                                <thead>
                                                <tr>
                                                    <th>#SL</th>
                                                    <th>Name</th>
                                                    <th>Level</th>
                                                    <th>Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {{#each sscdata}}
                                                    {{!-- single-donor --}}
                                                <tr>
                                                    <td>{{this.id}}</td>
                                                    <td>{{this.name}}</td>
                                                    <td>{{this.level}}</td>
                                                    <td>
                                                        <div class="btn-group">
                                                            <a onclick="displayDataIntoModal({{this.id}},'{{this.name}}','{{this.level}}','{{this.division}}','{{this.district}}','{{this.upazila}}','{{this.category}}','SSC')" data-bs-toggle="modal" data-bs-target="#staticBackdrop" role="button" class="btn btn-readmore btn-info btn-sm">Edit</a>
                                                            <a href="/users/deleteinstitution/{{this.id}}/ssc" role="button" class="btn btn-readmore btn-danger ml-1 btn-sm"><i class="fa fa-trash"></i></a>
                                                        </div>
                                                    </td>
                                                </tr>
                                                {{/each}}                      
                                                </tbody>
                                            </table>
                                        </div>
                                        

                                    </div>
                                </div>
                            </div>

                            <script>

                                const name_el =  document.getElementById('name'); 
                                const id_el =  document.getElementById('id'); 
                                const level_el =  document.getElementById('level'); 
                                const division_ins_el =  document.getElementById('division_ins'); 
                                const district_ins_el =  document.getElementById('district_ins');
                                const upazila_ins_el =  document.getElementById('upazila_ins');
                                const degree_ins_el =  document.getElementById('degree'); 
                                const category_ins_el =  document.getElementById('category'); 

                                const displayDataIntoModal =(id,name,level,division,district,upazila,degree,category)=>{
                                    id_el.value = id;
                                    name_el.value = name;
                                    level_el.value = level;
                                    division_ins_el.value = division;
                                    district_ins_el.value = district;
                                    upazila_ins_el.value = upazila;
                                    degree_ins_el.value = degree;
                                    category_ins_el.value = category;

                                }

                              
                            </script>
                            {{!-- hsc --}}
                            <div class="col-sm-12">
                                <div class="card card-warning card-outline">
                                    <div class="card-header">
                                        HSC
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-hover table-striped dt-responsive nowrap" id="active_blog" width="100%">
                                                <thead>
                                                <tr>
                                                    <th>#SL</th>
                                                    <th>Name</th>
                                                    <th>Level</th>
                                                    <th>Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {{#each hscdata}}
                                                    {{!-- single-donor --}}
                                                <tr>
                                                    <td>{{this.id}}</td>
                                                    <td>{{this.name}}</td>
                                                    <td>{{this.level}}</td>
                                                    <td>
                                                        <div class="btn-group">
                                                            <a onclick="displayDataIntoModal({{this.id}},'{{this.name}}','{{this.level}}','{{this.division}}','{{this.district}}','{{this.upazila}}','HSC')" data-bs-toggle="modal" data-bs-target="#staticBackdrop"  role="button" class="btn btn-readmore btn-info btn-sm">Edit</a>
                                                            <a href="/users/deleteinstitution/{{this.id}}/hsc" role="button" class="btn btn-readmore btn-danger ml-1 btn-sm"><i class="fa fa-trash"></i></a>
                                                        </div>
                                                    </td>
                                                </tr>
                                                {{/each}}                      
                                                </tbody>
                                            </table>
                                        </div>
                                        

                                    </div>
                                </div>
                            </div>
                            {{!-- bachelor --}}
                            <div class="col-sm-12">
                                <div class="card card-warning card-outline">
                                    <div class="card-header">
                                        BACHELOR
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-hover table-striped dt-responsive nowrap" id="active_blog" width="100%">
                                                <thead>
                                                <tr>
                                                    <th>#SL</th>
                                                    <th>Name</th>
                                                    <th>Level</th>
                                                    <th>Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {{#each bachelordata}}
                                                    {{!-- single-donor --}}
                                                <tr>
                                                    <td>{{this.id}}</td>
                                                    <td>{{this.name}}</td>
                                                    <td>{{this.level}}</td>
                                                    <td>
                                                        <div class="btn-group">
                                                            <a onclick="displayDataIntoModal({{this.id}},'{{this.name}}','{{this.level}}','{{this.division}}','{{this.district}}','{{this.upazila}}','Bachelor')" data-bs-toggle="modal" data-bs-target="#staticBackdrop" role="button" class="btn btn-readmore btn-info btn-sm">Edit</a>
                                                            <a href="/users/deleteinstitution/{{this.id}}/bachelor" role="button" class="btn btn-readmore btn-danger ml-1 btn-sm"><i class="fa fa-trash"></i></a>
                                                        </div>
                                                    </td>
                                                </tr>
                                                {{/each}}                      
                                                </tbody>
                                            </table>
                                        </div>
                                        

                                    </div>
                                </div>
                            </div>
                             {{!-- Division/district/upazila --}}
                            <div class="col-sm-12">
                                <div class="card card-warning card-outline">
                                    <div class="card-header">
                                        DIVISION/DISTRICT/UPAZILA
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-hover table-striped dt-responsive nowrap" id="active_blog" width="100%">
                                                <thead>
                                                <tr>
                                                    <th>#SL</th>
                                                    <th>Divsion</th>
                                                    <th>District</th>
                                                    <th>Upazila</th>
                                                    <th>Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {{#each divisiondata}}
                                                    {{!-- single-donor --}}
                                                <tr>
                                                    <td>{{this.id}}</td>
                                                    <td>{{this.division}}</td>
                                                    <td>{{this.district}}</td>
                                                    <td>{{this.upazila}}</td>
                                                    <td>
                                                        <div class="btn-group">
                                                            <a onclick="display({{this.id}},'{{this.division}}','{{this.district}}','{{this.upazila}}')" data-bs-toggle="modal" data-bs-target="#divisionModal" role="button" class="btn btn-readmore btn-info btn-sm">Edit</a>
                                                            <a href="/users/deleteinstitution/{{this.id}}/bachelor" role="button" class="btn btn-readmore btn-danger ml-1 btn-sm"><i class="fa fa-trash"></i></a>
                                                        </div>
                                                    </td>
                                                </tr>
                                                {{/each}}                      
                                                </tbody>
                                            </table>
                                        </div>
                                         
                                          <script>
                                            //division
                                            const division_el =  document.getElementById('division'); 
                                            const iddiv_el =  document.getElementById('id_div'); 
                                            const district_el =  document.getElementById('district'); 
                                            const upazila_el =  document.getElementById('upazila'); 

                                            function display(id,division,district,upazila){
                                                division_el.value = division;
                                                iddiv_el.value =  id;
                                                district_el.value =  district;
                                                upazila_el.value =  upazila;
                                                
                                            }

                                            //onsubmit
                                            const editdivision = document.getElementById("editdivision");
                                            editdivision.addEventListener("submit",(e)=>{
                                                e.preventDefault();
                                                const id =  iddiv_el.value;
                                                const division =  division_el.value;
                                                const district =  district_el.value;
                                                const upazila =  upazila_el.value;
                                                window.location.href = `/users/editdivision/${id}/${division}/${district}/${upazila}`;
                                                
                                            })
                                            
                                        </script>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>    
            </section>

           </div>
            </section>
                <!-- ============================================================== -->
                <!-- End PAge Content -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- Right sidebar -->
                <!-- ============================================================== -->
                <!-- .right-sidebar -->
                <!-- ============================================================== -->
                <!-- End Right sidebar -->
                <!-- ============================================================== -->
            </div>
            <!-- ============================================================== -->
            <!-- End Container fluid  -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- footer -->
            <!-- ============================================================== -->
           {{>footer}}