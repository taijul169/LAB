{{>header}}

        <!-- ============================================================== -->
        <!-- End Topbar header -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        {{>nav}}
        <!-- ============================================================== -->
        <!-- End Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page wrapper  -->
        <!-- ============================================================== -->
        <div class="page-wrapper">
             {{!-- ID Card --}}
            <!-- Button trigger modal -->
                <!-- Modal -->
               <div class="modal fade"  id="exampleModal" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" >
                  <div class="modal-content custom-content-card text-center ">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">User ID Card</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">X</button>
                    </div>
                  
                      <div class="custom-card shadow"  id="idcardWrap">
                        {{!-- card-front --}}
                        <div class="card-front">
                              {{!-- front-header --}}
                            <div class="card-front-header d-flex justify-content-between">
                              <div class="logo-card">
                                <img style="width: 35px;" src="/images/logo.png" alt="logo">
                              </div>
                              <div class="qrcode-card">
                                <input type="hidden" id="qr_code_value_id" value={{userData.[0].id}}>
                                <input type="hidden" id="qr_code_value_name" value={{userData.[0].name}}>
                                <input type="hidden" id="qr_code_value_email" value={{userData.[0].email}}>
                                <input type="hidden" id="qr_code_value_phone" value={{userData.[0].mobile}}>
                                <input type="hidden" id="qr_code_value_division" value={{userData.[0].division}}>
                                {{!-- qr_code display --}}
                                <div id="output_qr"></div>
                                
                                 {{!-- <img style="width: 50px;" src="/images/qr.png" alt="qr"> --}}
                              </div>
                            </div>
                          
                            {{!-- front-image-card --}}
                            <div class="front-image-card w-50">
                              <div class="img-shape">
                                <img src="data:image/png;base64,{{userData.[0].userphoto}}" style="width: 120px;" alt="proimg">
                              </div>
                            </div>
                            <div class="name_title">
                              <h4>{{userData.[0].firstname}}  {{userData.[0].lastname}}</h4>
                              <h5>{{designation userData.[0].committee_designation}}</h5>
                              <span class="d-block">Central committee (LAB)</span>
                              <small>Valid Till 24-07-2023</small>
                              
                            </div>
                            <div class="info-card text-left mt-2">
                            <h4><strong>ID: <span>00000{{userData.[0].id}}</span></strong></h4>
                            <small>Blood Group: <span>{{userData.[0].bloodgroup}}</span></small>
                            <p>Mob: <span>+88{{userData.[0].phone}}</span></p>
                            </div>
                            <div class="id-card-footer">
                              <div class="auth d-flex justify-content-between">
                                <div class="auth-president">
                                  <span>President</span>
                                  <i class="d-block">Signature</i>
                                </div>
                                <h6>Authorised By:</h6>
                                <div class="auth-secretary">
                                  <span>Secretary</span>
                                  <i class="d-block">Signature</i>
                                </div>
                              </div>
                            </div>
                        </div>
                         <div class="html2pdf__page-break"></div>
                        {{!-- card-Back --}}
                        <div class="card-front back mt-1  text-center position-relative" > 
                         <div class="logo-card-back mb-1 ">
                              <img style="width: 70px;" src="/images/logo.png" alt="logo">
                         </div>
                         <div class="heading-back text-uppercase mt-3">
                            <h4 style="font-size: 8px; color:black; line-height:0%" class="font-weight-bold">Law association of bangladesh</h4>
                            <span style="font-size: 6px; letter-spacing:1px;color:rgb(31, 31, 31);font-wight:500px; margin-top:-2px;display:block">Fight for right i fight for justice</span>
                          </div>
                          <div class="contact-info-card">
                            <ul>
                              <li><i class="fa fa-mobile mr-1" aria-hidden="true"></i> +88{{userData.[0].phone}}</li>
                              <li><i class="fa fa-map-marker mr-1" aria-hidden="true"></i>{{userData.[0].upazila}},{{userData.[0].district}},Bangladesh</li>
                              <li><i class="fa fa-envelope mr-1" aria-hidden="true"></i> {{userData.[0].email}}</li>
                            </ul>
                      
                          
                          </div>
                          <div class="id-card-footer back">
                            www.labbd.org
                            </div>
                        </div>
                      
                  </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" onclick="pdfGenarator()" class="btn btn-primary">Download</button>
                    </div>
                 </div>
                </div>
               </div>
               {{!-- commitee Edit modal --}}
               <!-- Button trigger modal -->
                <!-- Modal -->
                <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header">
                         
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="">ID</label>
                            <input type="text" readonly value="" class="form-control" id="com_id">
                        </div>
                          <div class="form-group">
                              <label for="">Name</label>
                              <input type="text"  value="" class="form-control" id="name">
                        </div>
                          <div class="form-group">
                              <label for="">Type</label>
                             <input type="text"  value="" class="form-control" id="type">
                        </div>
                          <div class="form-group">
                              <label for="">Start Date</label>
                             <input type="date" value="2000-05-05"   class="form-control" id="startdate">
                        </div>
                          <div class="form-group">
                              <label for="">End Date</label>
                           <input type="date"   class="form-control" id="enddate">
                        </div>
                       
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Update</button>
                    </div>
                    </div>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <div class="page-breadcrumb bg-white">
                <div class="row align-items-center">
                    <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
                        <h4 class="page-title text-uppercase font-medium font-14">Voting Page</h4>
                    </div>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- ============================================================== -->
            <!-- End Bread crumb and right sidebar toggle -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid">
                <!-- ============================================================== -->
                <!-- Start Page Content -->
                <!-- ============================================================== -->
                <!-- Row -->
                <div class="row pt-2 m-1">
                    <div class="col-sm-12">
                        {{#if message}}
                           <div class="alert alert-success" role="alert">
                                {{message.message}}
                           </div>
                        {{/if}}
                        <div class="card card-warning card-outline shadow">
                           <div class="card-header">
                              
                           </div>
                            <div class="card-body">
                              <input type="hidden" id="hiddenData" value="{{ExistingData}}">
                              <input type="hidden" id="nominationData" value="{{nomination_data}}">
                              <input type="hidden" id="userId" value={{userData.[0].id}}>
                              <input type="hidden" id="end_date" value={{end_date.[0].enddate}}>
                              <div class="heading-countdown w-100 text-right">
                                <h2>Time Remaining</h2>
                              </div>
                              <div class="countdown-wrap d-flex  mb-4 justify-content-end" id="countdownwrap">
                                   <div class="single-box-countdown"><span>Days</span><span id="days">12</span></div>
                                   <div class="single-box-countdown"><span>Hours</span><span id="hours"> 12</span></div>
                                   <div class="single-box-countdown"><span>Minutes</span><span id="minutes"> 00</span></div>
                                   <div class="single-box-countdown"><span>Seconds</span><span id="seconds">12</span></div>   
                              </div>

                              <input type="hidden" name="processVoteData" id="processVoteData" value="{{processDataVote}}">
                              <input type="hidden" name="degiprocessData" id="degiprocessData" value="{{degiprocessData}}">
                              <script>
                                const processVoteData = document.getElementById("processVoteData").value;
                                const degiprocessData = document.getElementById("degiprocessData").value;
                                const subBtnpresident = document.getElementsByClassName("sbmitbtn");

                                var inputs = $(".designation");
                                //const designation = document.getElementsByClassName("designation").attributes;
                                const voteVal = JSON.parse(processVoteData);
                                const degiVal = JSON.parse(degiprocessData);
                                console.log("voting data:",voteVal)
                                console.log("desi data:",degiVal)
                               window.addEventListener('load', (event) => {
                                     
                                      for(var j = 0;j<voteVal.length;j++){
                                        for(var i = 0;i<degiVal.length;i++){
                                         if(degiVal[i].name ==voteVal[j].designation){
                                            subBtnpresident[i].innerHTML = "Done";
                                            subBtnpresident[i].style.background = "#7F7F7F";
                                            subBtnpresident[i].setAttribute("disabled", "true");
                                          }
                                         
                                      }
                                      
                                    }
                                  });

                              </script>
                             <div class="row">
                            
                              {{#each designationData as |designationData|}}
                               {{!-- single-nomination --}}
                               <div class="col-md-6 col-12 col-sm-6 card">
                                <form action="/users/voting/{{this.committee_id}}" method="POST">
                                  <div class="card border">
                                    <div class="card-header">
                                    <b > {{this.name}}</b>
                                    <input type="hidden" class="designation" value="{{this.name}}" name="designation" >
                                  </div>
                                      <div class="card-body">
                                        <div class="form-group">
                                        <label for="">Select Candidate</label>
                                        <Select class="" required name="candidate_id" id="president" data-designation="President">
                                           <option value="">Choose One</option>
                                          {{!-- {{#each nomination_president}}
                                             <option value="{{this.userid}}">{{this.name}}</option>
                                          {{/each}} --}}
                                          {{!-- single-user --}}
                                        {{#each ../allNominationData as |allNominationData|}}
                                           {{designationlistVote ../this.name this.designation this.id this.committee_id this.name this.userid this.vote this.delete_status this.nomination_attachment}}
                                          {{/each}}
                                          
                                        </Select>
                                      </div>
                                      </div>
                                   
                                      <div class="card-footer d-flex justify-content-end">
                                        <button id="subBtnpresident" type="submit" class="btn btn-secondary sbmitbtn" >Click for vote</button>
                                      </div>
                                  </div>
                                 </form>
                               </div>
                               {{/each}}
                             </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                </div>
            
                </div>
                <!-- Row -->
                <!-- ============================================================== -->
                <!-- End PAge Content -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- Right sidebar -->
                <!-- ============================================================== -->
                <!-- .right-sidebar -->
                <!-- ============================================================== -->
                <!-- End Right sidebar -->
                <!-- ============================================================== -->
            </div>
             <script>

              
          


                  
            // counter start--------------------------------------------------------
             const end_date = document.getElementById('end_date').value
            // Set the date we're counting down to
            var countDownDate = new Date(end_date).getTime();

            // Update the count down every 1 second
            var x = setInterval(function() {

              // Get today's date and time
              var now = new Date().getTime();
                
              // Find the distance between now and the count down date
              var distance = countDownDate - now;
            
                
              // Time calculations for days, hours, minutes and seconds
              var days = Math.floor(distance / (1000 * 60 * 60 * 24));
              var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
              var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
              var seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
              // Output the result in an element with id="demo"
              document.getElementById("days").innerHTML = days;
              document.getElementById("hours").innerHTML = hours;
              document.getElementById("minutes").innerHTML = minutes;
              document.getElementById("seconds").innerHTML = seconds;
              // If the count down is over, write some text 
              if (distance < 0) {
                clearInterval(x);

                document.getElementById("countdownwrap").innerHTML = "<b class='text-center'>Expired!!</b>";
                const subBtnpresident = document.getElementsByClassName("sbmitbtn");
                for(var a = 0;a<subBtnpresident.length;a++){
                  subBtnpresident[a].disabled =true;
                }
                
              }
            }, 1000);      
            </script>
            <!-- ============================================================== -->
            <!-- End Container fluid  -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- footer -->
            <!-- ============================================================== -->
           {{>footer}}